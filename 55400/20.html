<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
	<title>Module 7: Labs</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link rel="stylesheet" type="text/css" href="stylesheet.css" />
</head>
<body class="calibre">
	<ol class="list_">
		<li value="4" class="block_15">Select <b class="calibre6">Table1</b> <br class="calibre2" /><br
				class="calibre2" /><img src="images/image-161.png" alt="Image" class="calibre239" /></li>
		<li class="block_16">Next click <b class="calibre6">Load</b><br class="calibre2" /> </li>
		<li class="block_16">Next, to make use of this new table we need to tidy it up using Power Query Editor once more, so
			click on the <b class="calibre6">Home</b> tab, then choose <b class="calibre6">Transform data</b><br
				class="calibre2" /> </li>
		<li class="block_16">Select <b class="calibre6">Customers</b> query, then in the <i class="calibre7">Home </i>tab
			ribbon click on <b class="calibre6">Choose Columns</b> and untick <b class="calibre6">City </b>and <b
				class="calibre6">County</b> then click <b class="calibre6">OK<br class="calibre2" /></b><br
				class="calibre2" /><img src="images/image236.png" alt="Image" class="calibre240" /><br class="calibre2" /> </li>
		<li class="block_16">Next, select the <b class="calibre6">Table1</b> table from the <i class="calibre7">Queries</i>
			pane<br class="calibre2" /> </li>
		<li class="block_16">In the <i class="calibre7">Query Settings</i> pane, change the name of the query from <i
				class="calibre7">Table1</i> to <b class="calibre6">UK Postcodes</b> <br class="calibre2" /><br
				class="calibre2" /><img src="images/image-162.png" alt="Image" class="calibre241" /><br class="calibre2" /><br
				class="calibre2" /> </li>
		<li class="block_16">We can see that some counties have more than one postcode district as shown below<br
				class="calibre2" /><br class="calibre2" /><img src="images/image-163.png" alt="Image" class="calibre242" /><br
				class="calibre2" /> </li>
		<li class="block_16">To create new rows for the grouped postcodes that are split by a comma, select the <b
				class="calibre6">Postcode districts</b> column, then in the <i class="calibre7">Home </i>tab of the ribbon, choose
			<b class="calibre6">Split Column</b> then <b class="calibre6">By Delimiter</b> <br class="calibre2" /><br
				class="calibre2" />(if you don’t have column headings, for example you see <b class="calibre6">Column2</b> instead
			of Postcode districts, in the <b class="calibre6">Home</b> tab of the ribbon click on <b class="calibre6">Use First
				Row as Headers</b> in the <i class="calibre7">Transform</i> category)<br class="calibre2" /><br
				class="calibre2" /><img src="images/image-164.png" alt="Image" class="calibre243" /><br class="calibre2" /> </li>
		<li class="block_16">Choose to split by <b class="calibre6">Comma</b>, then expand <b class="calibre6">Advanced
				options </b>and choosing to split into <b class="calibre6">Rows</b><br class="calibre2" /> </li>
		<li class="block_16">Click <b class="calibre6">OK </b>to split out the grouped postcodes<br class="calibre2" /> </li>
		<li class="block_16">To get rid of the return carriages, with the <b class="calibre6">Postcode districts</b> column
			selected, in the <b class="calibre6">Transform</b> tab in the ribbon then choose <b class="calibre6">Format</b> then
			<b class="calibre6">Trim<br class="calibre2" /></b><img src="images/image-165.png"
				alt="Graphical user interface, text, application&#10;&#10;Description automatically generated"
				class="calibre244" /></li>
		<li class="block_16">Next, there are some repeated postcodes so <b class="calibre6">right click</b> on the <b
				class="calibre6">Postcode districts</b> column and choose <b class="calibre6">Remove Duplicates</b><br
				class="calibre2" /> </li>
		<li class="block_16">One other thing to clean up are the brackets around some counties e.g. <i
				class="calibre7">(Aberdeenshire)</i> so select the <b class="calibre6">Former postal county</b> column<br
				class="calibre2" /> </li>
		<li class="block_16">In the <b class="calibre6">Transform</b> tab of the ribbon, select <b class="calibre6">Replace
				Values </b>from <i class="calibre7">Any Column</i> category<br class="calibre2" /> </li>
		<li class="block_16">Replace <b class="calibre6">(</b> with nothing and click <b class="calibre6">OK</b><br
				class="calibre2" /> </li>
		<li class="block_16">Repeat step 17 and replace <b class="calibre6">)</b> with nothing and click <b
				class="calibre6">OK</b><br class="calibre2" /> </li>
		<li class="block_16">Our UK Postcodes data is tidy, now we will get our postcodes in our customers table to match the
			postal districts in our UK Postcodes table, click on the <b class="calibre6">Customers</b> table in the <i
				class="calibre7">Queries</i> pane<br class="calibre2" /> </li>
		<li class="block_16">Select the <b class="calibre6">Postcode </b>column and choose <b class="calibre6">Split
				Column</b> in the <i class="calibre7">Transform</i> tab of the ribbon, then choose <b class="calibre6">By
				Delimiter</b><br class="calibre2" /> </li>
		<li class="block_16">Leave the selection as <b class="calibre6">Space</b> and click <b class="calibre6">OK</b><br
				class="calibre2" /> </li>
		<li class="block_16">Right click on <b class="calibre6">Postcode.2</b> and choose <b class="calibre6">Remove</b><br
				class="calibre2" /> </li>
		<li class="block_16">Right click on <b class="calibre6">Postcode.1</b> and rename it to <b
				class="calibre6">Postcode</b><br class="calibre2" /> </li>
		<li class="block_16">The queries are now ready, sadly because there was not a relationship between this data when we
			added it, we cannot use the expand button to bring related columns from the UK Postcode table into the customer
			table <br class="calibre2" /> </li>
		<li class="block_16">In the <b class="calibre6">Home</b> tab, click on <b class="calibre6">Close &amp; Apply</b><br
				class="calibre2" /> </li>
		<li class="block_16">Back in Power BI Desktop, click on the <b class="calibre6">Model</b> <img
				src="images/image130.png" alt="Image" class="calibre167" /> view in the rail menu<br class="calibre2" /> </li>
		<li class="block_16">Notice the UK Postcodes data is not related to our customer postcode data, click on <b
				class="calibre6">Manage relationships </b>in the <i class="calibre7">Home</i> tab of the ribbon<br
				class="calibre2" /> </li>
		<li class="block_16">Click <b class="calibre6">Autodetect…</b> but notice it cannot find a relationship, nice work
			Power BI, let us step in and help you out here…<br class="calibre2" /> </li>
		<li class="block_16">Instead click <b class="calibre6">Close</b> then click <b class="calibre6">New…</b><br
				class="calibre2" /> </li>
		<li class="block_16">Configure the relationship as follows:<br class="calibre2" /><br class="calibre2" />Please note
			that you need to choose the <b class="calibre6">Customers </b>and <b class="calibre6">UK Postcodes</b> tables, then
			click and select the <b class="calibre6">Postcode </b>column in the <i class="calibre7">Customers</i> table then the
			<b class="calibre6">Postcode districts</b> column in the <i class="calibre7">UK Postcodes </i>table, the columns
			turn grey<br class="calibre2" /> </li>
	</ol>
	<p class="block_26">Set your cross directional filter to <b class="calibre6">Both</b> and check the cardinality is <b
			class="calibre6">Many to one (*:1)</b><br class="calibre2" /><img src="images/image-166.png" alt="Image"
			class="calibre245" /></p>
	<ol class="list_">
		<li value="32" class="block_16">Click <b class="calibre6">OK</b> to create the relationship, then click <b
				class="calibre6">Close</b> on the <i class="calibre7">Manage relationships</i> window <br class="calibre2" /> 
		</li>
		<li class="block_16">Now we need to take the useful columns from the UK Postcodes table and bring them into the
			Customers table which we could not do in Power Query, so we will use a different method, click on <b
				class="calibre6">Data</b> <img src="images/image144.png" alt="Image" class="calibre169" /> in the rail menu (do
			not worry about the errors relating to missing columns, we will resolve this)<br class="calibre2" /> </li>
		<li class="block_16">In the <b class="calibre6">Customers</b> table choose <b class="calibre6">New column</b> from the
			<b class="calibre6">Home</b> tab of the ribbon<br class="calibre2" /> </li>
		<li class="block_16">Enter the following formula <span class="text_12">County = RELATED('UK Postcodes'[Former postal
				county])</span><br class="calibre2" /> </li>
		<li class="block_16">Again, in the <b class="calibre6">Customers</b> table choose <b class="calibre6">New column</b>
			from the <b class="calibre6">Home</b> tab of the ribbon<br class="calibre2" /> </li>
		<li class="block_16">Enter the following formula <span class="text_12">City = RELATED('UK Postcodes'[Post
				town])</span><b class="calibre6"><br class="calibre2" /> </b></li>
		<li class="block_16">The counties and cities will be added to your customer data and it is accurate based on the
			postcodes provided by the customer, sometimes you need to do a lot of work to correct errors in data<br
				class="calibre2" /><b class="calibre6"><br class="calibre2" /></b><img src="images/image-167.png" alt="Image"
				class="calibre246" /><b class="calibre6"><br class="calibre2" /> </b></li>
		<li class="block_16">Next, click on the <b class="calibre6">Model</b> <img src="images/image130.png" alt="Image"
				class="calibre167" /> view in the rail menu<br class="calibre2" /> </li>
		<li class="block_16">The relationship between the UKSalesRegions table and the Customers table also needs recreating,
			click <b class="calibre6">Manage relationships</b> in the <i class="calibre7">Home</i> tab of the ribbon<b
				class="calibre6"><br class="calibre2" /> </b></li>
		<li class="block_16">Click <b class="calibre6">New…</b><br class="calibre2" /> </li>
		<li class="block_16">Configure the relationship as follows:<br class="calibre2" /><br class="calibre2" />Please note
			that you need to choose the <b class="calibre6">Customers </b>and <b class="calibre6">UKSalesRegions</b> tables,
			then click and select the <b class="calibre6">County </b>column in the <i class="calibre7">Customers</i> table then
			the <b class="calibre6">CountyName</b> column in the <i class="calibre7">UKSalesRegions </i>table, the columns turn
			grey<br class="calibre2" /><br class="calibre2" />Set your cross directional filter to <b class="calibre6">Both</b>
			and check the cardinality is <b class="calibre6">Many to one (*:1)<br class="calibre2" /><br
					class="calibre2" /></b>See a preview of this configuration on the following page<br class="calibre2" /><br
				class="calibre2" /><img src="images/image-168.png" alt="Image" class="calibre247" /></li>
		<li class="block_16">Click <b class="calibre6">OK </b>and then click <b class="calibre6">Close<br
					class="calibre2" /> </b></li>
		<li class="block_16">In the rail menu, click on <b class="calibre6">Report</b> <img src="images/image167.png"
				alt="Image" class="calibre174" /> view<b class="calibre6"><br class="calibre2" /> </b></li>
		<li class="block_24">Select the <b class="calibre6">Sales by Region </b>page, the map has updated with the new
			regions, use the slicer to explore the regions, there should not be any more anomalies, e.g. London being included
			in the northern region<br class="calibre2" /> </li>
	</ol>
	<p class="block_25" id="calibre_pb_21">It is important that your information is as accurate as possible to provide your
		audience with real insights. With inaccurate data, stakeholders in your report may make ill informed decisions.</p>
</body>
</html>